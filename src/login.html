<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section>
    <div class="login-box">
        <form action="submit" id="loginform">
            <span></span>
            <h1>Thread-Eye</h1>
            <h2>Log-in</h2>
            <div class="input-box">
                <span class="icon">
                    <ion-icon name="mail"></ion-icon></span>
                    <input type="email" id="email" required>
                    <label for="email">E-mail</label>
                
            </div>
            <div class="input-box">
                <span class="icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" id="password" required>
                    <label>Password</label>
            </div>
            <div class="remember-forgot">
                <label>
                    <input id="rememberMe" type="checkbox">
                    Remember me
                </label>
                <a href="/signup">Forgot Password</a>
            </div>
            <button type="submit">Login</button>
            <div class="register-link">
                <p>Don't have an account?<a href="/signup">Register</a></p>
            </div>

        </form>
    </div>
</section>
<script>
    document.getElementById("loginform").addEventListener("submit",async(e)=>{
        e.preventDefault();
        const email=document.getElementById("email").value;
        const password=document.getElementById("password").value;
        const rememberMe=document.getElementById("rememberMe").value;

        const res=await fetch("http://localhost:4000/api/auth/login",{
            method: "POST",
            headers : {"Content-Type" : "application/json"},
            body: JSON.stringify({email,password,rememberMe})
        });
        const data = await res.json();
            if(res.ok){
                alert("Login - Successful!");
                window.location.href = "/profile";
            } else {
                alert(data.message || "Log-in failed!");
            }
    });
</script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>